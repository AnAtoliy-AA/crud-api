(()=>{"use strict";var e={799:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(41));t.default=class{getUsers(){return i(this,void 0,void 0,(function*(){return new Promise(((e,t)=>e(o.default)))}))}getUser(e){return i(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{const i=o.default.find((t=>t.id===Number(parseInt(e))));i?t(i):n(`user with id ${e} not found `)}))}))}createUser(e){return i(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{t(Object.assign(Object.assign({},e),{id:Math.floor(4+10*Math.random())}))}))}))}updateUser(e){return i(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{const i=o.default.find((t=>t.id===parseInt(e)));i||n(`No user with id ${e} found`),t(i)}))}))}deleteUser(e){return i(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{o.default.find((t=>t.id===parseInt(e)))||n(`No user with id ${e} found`),t("user deleted successfully")}))}))}}},41:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=[]},341:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((i=i.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(685)),s=r(n(799)),a=r(n(147)),u=process.env.PORT||5e3;o.default.createServer(((e,t)=>i(void 0,void 0,void 0,(function*(){var n,i,r,o;if("/api/users"===e.url&&"GET"===e.method){const e=yield(new s.default).getUsers();t.writeHead(200,{"Content-Type":"application/json"}),t.end(JSON.stringify(e))}else if((null===(n=null==e?void 0:e.url)||void 0===n?void 0:n.match(/\/api\/users\/([0-9]+)/))&&"GET"===e.method)try{const n=null===(i=null==e?void 0:e.url)||void 0===i?void 0:i.split("/")[3],r=yield(new s.default).getUser(n);t.writeHead(200,{"Content-Type":"application/json"}),t.end(JSON.stringify(r))}catch(e){t.writeHead(404,{"Content-Type":"application/json"}),t.end(JSON.stringify({message:e}))}else if((null===(r=e.url)||void 0===r?void 0:r.match(/\/api\/users\/([0-9]+)/))&&"DELETE"===e.method)try{const n=e.url.split("/")[3];let i=yield(new s.default).deleteUser(n);t.writeHead(200,{"Content-Type":"application/json"}),t.end(JSON.stringify({message:i}))}catch(e){t.writeHead(404,{"Content-Type":"application/json"}),t.end(JSON.stringify({message:e}))}else if((null===(o=e.url)||void 0===o?void 0:o.match(/\/api\/users\/([0-9]+)/))&&"PATCH"===e.method)try{const n=e.url.split("/")[3];let i=yield(new s.default).updateUser(n);t.writeHead(200,{"Content-Type":"application/json"}),t.end(JSON.stringify(i))}catch(e){t.writeHead(404,{"Content-Type":"application/json"}),t.end(JSON.stringify({message:e}))}else if("/api/users"===e.url&&"POST"===e.method){const n=yield(0,a.default)(e),i=yield(new s.default).createUser(JSON.parse(n));t.writeHead(200,{"Content-Type":"application/json"}),t.end(JSON.stringify(i))}else t.writeHead(404,{"Content-Type":"application/json"}),t.end(JSON.stringify({message:"Route not found"}))})))).listen(u,(()=>{console.log(`server started on port: ${u}`)}))},147:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new Promise(((t,n)=>{try{let n="";e.on("data",(e=>{n+=e.toString()})),e.on("end",(()=>{t(n)}))}catch(e){n(e)}}))}},685:e=>{e.exports=require("http")}},t={};!function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}(341)})();